{% extends "Home/base.html" %}
{% load static %}

{% block body %}
<div class="page-wrapper">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row align-items-center">
                <div class="col">
                    <h3 class="page-title">Teacher Profile</h3>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'teacher_dashboard' %}">Dashboard</a></li>
                        <li class="breadcrumb-item active">Profile</li>
                    </ul>
                </div>
                <div class="col-auto">
                    <a href="{% url 'teacher_profile_edit' %}" class="btn btn-primary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body text-center">
                        <div class="profile-img-container">
                            <img src="{{ teacher.get_profile_picture_url }}" 
                                 alt="Profile Picture" 
                                 class="rounded-circle profile-img"
                                 onerror="this.onerror=null;this.src='{% static 'img/profiles/avatar-01.jpg' %}'">
                            <div class="profile-status bg-success"></div>
                        </div>
                        <h4 class="mt-3">{{ teacher.get_full_name }}</h4>
                        <p class="text-muted mb-2">
                            <i class="fas fa-certificate mr-1"></i> 
                            {{ teacher.qualification|default:"Not specified" }}
                        </p>
                        <p class="text-muted">
                            <i class="fas fa-building mr-1"></i> 
                            {{ teacher.department|default:"Not specified" }}
                        </p>
                        
                        <div class="profile-info">
                            <div class="info-item">
                                <i class="fas fa-envelope"></i>
                                <span>{{ teacher.email }}</span>
                            </div>
                            {% if teacher.phone %}
                            <div class="info-item">
                                <i class="fas fa-phone"></i>
                                <span>{{ teacher.phone }}</span>
                            </div>
                            {% endif %}
                            <div class="info-item">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Joined {{ teacher.joining_date|date:"F Y" }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title">Subjects Taught</h5>
                    </div>
                    <div class="card-body">
                        <div class="skills">
                            {% for subject in subjects %}
                            <span class="skill-badge">{{ subject }}</span>
                            {% empty %}
                            <p class="text-muted">No subjects assigned</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Professional Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="info-box">
                                    <span class="info-box-icon bg-info">
                                        <i class="fas fa-graduation-cap"></i>
                                    </span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Highest Qualification</span>
                                        <span class="info-box-number">{{ teacher.qualification|default:"-" }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <span class="info-box-icon bg-success">
                                        <i class="fas fa-building"></i>
                                    </span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Department</span>
                                        <span class="info-box-number">{{ teacher.department|default:"-" }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="info-box">
                                    <span class="info-box-icon bg-warning">
                                        <i class="fas fa-calendar-day"></i>
                                    </span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Joining Date</span>
                                        <span class="info-box-number">{{ teacher.joining_date|date:"F j, Y"|default:"-" }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <span class="info-box-icon bg-danger">
                                        <i class="fas fa-clock"></i>
                                    </span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Years of Service</span>
                                        <span class="info-box-number">{{ years_of_service }} years</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="professional-details mt-4">
                            <h6>Additional Information</h6>
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <tbody>
                                        <tr>
                                            <td>Specialization</td>
                                            <td>{{ teacher.specialization|default:"-" }}</td>
                                        </tr>
                                        <tr>
                                            <td>Classes Assigned</td>
                                            <td>
                                                {% for class in classes %}
                                                <span class="badge badge-primary">{{ class }}</span>
                                                {% empty %}
                                                -
                                                {% endfor %}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Total Students</td>
                                            <td>{{ total_students }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.profile-img-container {
    position: relative;
    width: 150px;
    height: 150px;
    margin: 0 auto 20px;
}
.profile-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.profile-status {
    position: absolute;
    bottom: 10px;
    right: 10px;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    border: 2px solid white;
}
.profile-info {
    text-align: left;
    margin-top: 20px;
}
.info-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}
.info-item i {
    width: 30px;
    color: #6c757d;
}
.skill-badge {
    display: inline-block;
    padding: 5px 10px;
    margin: 2px;
    background-color: #f0f0f0;
    border-radius: 4px;
    font-size: 0.9rem;
}
.info-box {
    display: flex;
    background: #f9f9f9;
    border-radius: 5px;
    padding: 15px;
    height: 100%;
}
.info-box-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    font-size: 1.5rem;
    color: white;
    border-radius: 5px 0 0 5px;
}
.info-box-content {
    padding-left: 15px;
    flex: 1;
}
.info-box-text {
    display: block;
    font-size: 0.9rem;
    color: #6c757d;
}
.info-box-number {
    font-weight: 600;
    font-size: 1.2rem;
}
.professional-details {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 5px;
}
</style>
{% endblock %}