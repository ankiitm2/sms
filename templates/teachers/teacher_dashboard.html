{% extends 'Home/base.html' %}
{% load static %}

{% block body %}
<div class="page-wrapper animate__animated animate__fadeIn">
<div class="content container-fluid pb-5">

<!-- Welcome Header with More Space -->
<div class="page-header animate__animated animate__fadeInDown mb-4">
    <div class="row align-items-center">
        <div class="col">
            <h3 class="page-title mb-2">Welcome, <span class="text-primary">{{ user.get_full_name }}</span>!</h3>
            <p class="text-muted">Your teaching dashboard for today</p>
        </div>
        <!-- <div class="col-auto">
            <div class="avatar avatar-lg hover-scale">
                <img src="{% static 'assets/img/profiles/avatar-teacher.jpg' %}" 
                     alt="Teacher" 
                     class="avatar-img rounded-circle border-primary">
            </div>
        </div> -->
    </div>
</div>

<!-- Stats Cards with Better Spacing -->
<div class="row row-cols-1 row-cols-md-4 g-4 mb-4">
    <div class="col">
        <div class="card stat-card bg-dark text-white hover-tilt animate__animated animate__fadeInUp" data-animation-delay="0.1s">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-white-50 mb-2">Classes Teaching</h6>
                        <h2 class="text-white counter mb-0" data-count="{{ classes_teaching }}">0</h2>
                    </div>
                    <div class="icon-circle bg-white-10">
                        <i class="fas fa-chalkboard-teacher text-white"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col">
        <div class="card stat-card bg-success text-white hover-tilt animate__animated animate__fadeInUp" data-animation-delay="0.2s">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-white-50 mb-2">Students Taught</h6>
                        <h2 class="text-white counter mb-0" data-count="{{ students_taught }}">0</h2>
                    </div>
                    <div class="icon-circle bg-white-10">
                        <i class="fas fa-users text-white"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col">
        <div class="card stat-card bg-warning text-white hover-tilt animate__animated animate__fadeInUp" data-animation-delay="0.3s">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-white-50 mb-2">Tests to Grade</h6>
                        <h2 class="text-white counter mb-0" data-count="{{ tests_to_grade|length }}">0</h2>
                    </div>
                    <div class="icon-circle bg-white-10">
                        <i class="fas fa-clipboard-check text-white"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col">
        <div class="card stat-card bg-info text-white hover-tilt animate__animated animate__fadeInUp" data-animation-delay="0.4s">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="text-white-50 mb-0">Upcoming Classes</h6>
                    <span class="badge badge-light pulse">{{ upcoming_classes|length }}</span>
                </div>
                {% if upcoming_classes %}
                <div class="upcoming-classes">
                    {% for class in upcoming_classes|slice:":2" %}
                    <div class="d-flex justify-content-between text-white mb-2 hover-slide">
                        <span>{{ class.day|slice:":3" }}</span>
                        <span>{{ class.start_time|time:"H:i" }}</span>
                        <span>{{ class.subject|truncatechars:12 }}</span>
                    </div>
                    {% endfor %}
                </div>
                <a href="#" class="btn btn-link text-white btn-sm mt-2 hover-grow">View All <i class="fas fa-chevron-right ml-1"></i></a>
                {% else %}
                <p class="text-white-50 mb-0">No upcoming classes</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Main Content Row with Better Spacing -->
<div class="row g-4">
    <!-- Schedule Card -->
    <div class="col-lg-8">
        <div class="card hover-glow animate__animated animate__fadeInLeft">
            <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                <h5 class="card-title mb-0">Today's Schedule</h5>
                <a href="{% url 'teacher_schedule' %}" class="btn btn-sm btn-outline-primary hover-grow">
                    View Full Schedule <i class="fas fa-chevron-right ml-1"></i>
                </a>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="thead-light">
                            <tr>
                                <th>Time</th>
                                <th>Subject</th>
                                <th>Class</th>
                                <th>Section</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="hover-float">
                                <td>
                                    <span class="text-primary">9:00 AM</span> - <span class="text-primary">10:00 AM</span>
                                </td>
                                <td>Mathematics</td>
                                <td>10</td>
                                <td>A</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-primary hover-grow">
                                        <i class="fas fa-play mr-1"></i> Start
                                    </a>
                                </td>
                            </tr>
                            <tr class="hover-float">
                                <td>
                                    <span class="text-primary">11:00 AM</span> - <span class="text-primary">12:00 PM</span>
                                </td>
                                <td>Science</td>
                                <td>9</td>
                                <td>B</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-outline-primary hover-grow">
                                        <i class="fas fa-book-open mr-1"></i> Prepare
                                    </a>
                                </td>
                            </tr>
                            <tr class="hover-float">
                                <td>
                                    <span class="text-primary">2:00 PM</span> - <span class="text-primary">3:00 PM</span>
                                </td>
                                <td>English</td>
                                <td>11</td>
                                <td>C</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-outline-primary hover-grow">
                                        <i class="fas fa-book-open mr-1"></i> Prepare
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Card -->
    <div class="col-lg-4">
        <div class="card hover-3d animate__animated animate__fadeInRight">
            <div class="card-header bg-white py-3">
                <h5 class="card-title mb-0">Quick Actions</h5>
            </div>
            <div class="card-body p-3">
                <div class="list-group list-group-flush">
                    <a href="{% url 'create_assignment' %}" class="list-group-item list-group-item-action d-flex align-items-center hover-slide py-3 px-3">
                        <div class="icon-circle bg-primary-light text-primary mr-3">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">Create Assignment</h6>
                            <small class="text-muted">New learning task</small>
                        </div>
                        <i class="fas fa-chevron-right ml-auto text-muted"></i>
                    </a>
                    <a href="{% url 'grade_submissions' %}" class="list-group-item list-group-item-action d-flex align-items-center hover-slide py-3 px-3">
                        <div class="icon-circle bg-success-light text-success mr-3">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">Grade Submissions</h6>
                            <small class="text-muted">{{ tests_to_grade|length }} pending</small>
                        </div>
                        <i class="fas fa-chevron-right ml-auto text-muted"></i>
                    </a>
                    <a href="{% url 'attendance' %}" class="list-group-item list-group-item-action d-flex align-items-center hover-slide py-3 px-3">
                        <div class="icon-circle bg-info-light text-info mr-3">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">Take Attendance</h6>
                            <small class="text-muted">Mark today's presence</small>
                        </div>
                        <i class="fas fa-chevron-right ml-auto text-muted"></i>
                    </a>
                    <a href="{% url 'teacher_profile' %}" class="list-group-item list-group-item-action d-flex align-items-center hover-slide py-3 px-3">
                        <div class="icon-circle bg-warning-light text-warning mr-3">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">Update Profile</h6>
                            <small class="text-muted">Edit your information</small>
                        </div>
                        <i class="fas fa-chevron-right ml-auto text-muted"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Announcements and Activity Section -->
<div class="row mt-4 g-4">
    <div class="col-md-6">
        <div class="card hover-parallax animate__animated animate__fadeInUp">
            <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                <h5 class="card-title mb-0">Recent Announcements</h5>
                <a href="#" class="btn btn-sm btn-outline-secondary hover-grow">
                    View All <i class="fas fa-chevron-right ml-1"></i>
                </a>
            </div>
            <div class="card-body">
                <div class="announcement-feed">
                    <div class="announcement-item hover-slide mb-3 pb-3 border-bottom">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="badge badge-primary pulse">New</span>
                            <small class="text-muted">Today, 10:30 AM</small>
                        </div>
                        <h6 class="mb-1">School Maintenance Day</h6>
                        <p class="mb-0 text-muted">School will be closed next Monday for maintenance work. Please plan your lessons accordingly.</p>
                    </div>
                    <div class="announcement-item hover-slide">
                        <div class="d-flex justify-content-between mb-2">
                            <small class="text-muted">Yesterday, 3:45 PM</small>
                        </div>
                        <h6 class="mb-1">Staff Meeting</h6>
                        <p class="mb-0 text-muted">Staff meeting scheduled for Friday at 3 PM in the conference room. Attendance is mandatory.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card hover-parallax animate__animated animate__fadeInUp">
            <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                <h5 class="card-title mb-0">Recent Activity</h5>
                <a href="#" class="btn btn-sm btn-outline-secondary hover-grow">
                    View All <i class="fas fa-chevron-right ml-1"></i>
                </a>
            </div>
            <div class="card-body">
                <div class="activity-feed">
                    <div class="activity-item hover-slide mb-3 pb-3 border-bottom">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="badge badge-info">Assignment</span>
                            <small class="text-muted">2 hours ago</small>
                        </div>
                        <p class="mb-0">Created new Math assignment for Grade 10</p>
                    </div>
                    <div class="activity-item hover-slide">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="badge badge-success">Grading</span>
                            <small class="text-muted">5 hours ago</small>
                        </div>
                        <p class="mb-0">Graded Science tests for Section B</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>
</div>

<!-- Include your scripts here -->
<script src="{%static 'assets/js/jquery-3.6.0.min.js' %}"></script>
<script src="{%static 'assets/js/popper.min.js' %}"></script>
<script src="{%static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{%static 'assets/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js"></script>

<style>
    /* Improved Spacing and Typography */
    .page-header {
        padding: 20px 0;
        margin-bottom: 30px;
        border-bottom: 1px solid #f0f0f0;
    }
    
    /* Card Styles with More Space */
    .card {
        border: none;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
        margin-bottom: 0;
    }
    
    .card-header {
        padding: 15px 20px;
        background-color: white;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .card-body {
        padding: 20px;
    }
    
    /* Stats Cards */
    .stat-card {
        border-radius: 10px;
        overflow: hidden;
        transition: all 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .icon-circle {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }
    
    .bg-white-10 {
        background-color: rgba(255,255,255,0.1);
    }
    
    /* Animation Classes */
    .hover-grow {
        transition: all 0.3s ease;
    }
    .hover-grow:hover {
        transform: scale(1.02);
    }
    .hover-tilt {
        transition: transform 0.3s ease;
    }
    .hover-tilt:hover {
        transform: perspective(1000px) rotateX(2deg) rotateY(2deg);
    }
    .hover-slide:hover {
        transform: translateX(5px);
    }
    .hover-float:hover {
        transform: translateY(-3px);
    }
    .hover-3d {
        transition: all 0.5s ease;
    }
    .hover-3d:hover {
        transform: perspective(1000px) rotateY(5deg);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    .hover-parallax {
        transition: all 0.3s ease;
    }
    .hover-parallax:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    .hover-glow:hover {
        box-shadow: 0 0 15px rgba(78, 115, 223, 0.2);
    }
    
    .pulse {
        animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    /* Table Styles */
    .table {
        margin-bottom: 0;
    }
    
    .table thead th {
        border-top: none;
        border-bottom: 1px solid #dee2e6;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #6c757d;
    }
    
    .table tbody tr {
        transition: all 0.3s ease;
    }
    
    /* List Group Styles */
    .list-group-item {
        border: none;
        border-bottom: 1px solid rgba(0,0,0,0.05);
        padding: 15px 20px;
    }
    
    .list-group-item:last-child {
        border-bottom: none;
    }
    
    /* Avatar Styles */
    .avatar {
        position: relative;
        display: inline-block;
    }
    
    .avatar-img {
        width: 100%;
        height: auto;
        max-width: 100%;
        border-radius: 50%;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 767px) {
        .page-header {
            padding: 15px 0;
        }
        
        .card-body {
            padding: 15px;
        }
        
        .hover-3d:hover, .hover-tilt:hover {
            transform: none;
        }
    }
</style>

<script>
    // Initialize animations and effects
    $(document).ready(function() {
        // Counter animation
        $('.counter').counterUp({
            delay: 10,
            time: 1000
        });
        
        // Stagger animations for cards
        $('[data-animation-delay]').each(function() {
            var delay = $(this).data('animation-delay');
            $(this).css('animation-delay', delay + 's');
        });
        
        // Add hover effect to table rows
        $('.table-hover tbody tr').hover(
            function() {
                $(this).css('transform', 'translateY(-2px)');
                $(this).css('box-shadow', '0 5px 15px rgba(0,0,0,0.05)');
            },
            function() {
                $(this).css('transform', 'translateY(0)');
                $(this).css('box-shadow', 'none');
            }
        );
    });
</script>

{% endblock %}